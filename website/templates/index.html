<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Garage - {{ status }}</title>
    {% if status == "Open" %}
    <link rel="icon" 
      type="image/png" 
      href="{{ url_for("static", filename="open.png") }}">
    {% else %}
    <link rel="icon" 
        type="image/png" 
        href="{{ url_for("static", filename="closed.png") }}">
    {% endif %}
    <style type="text/css">
        table td {
            padding: .5em 1em;
        }
    </style>
</head>
<body>
    <p>{{ age_minutes }} minutes ago, the garage door status was updated to <b>{{ status | lower }}</b>.</p>
    <small>Last status update was at <span data-lastupdatedsecs="{{ last_updated_secs }}"></span>.</small>
    {% if age_minutes > 65 %}
    <p>Warning: last status update was over 1 hour and 5 minutes ago. Device may not be working.</p>
    {% endif %}
    <script>
        const el = document.querySelector("[data-lastupdatedsecs]");
        const dateUnixMS = parseInt(el.getAttribute("data-lastupdatedsecs")) * 1000;
        const dateStr = (new Date(dateUnixMS)).toLocaleString();
        el.innerHTML = dateStr;
    </script>

</body>
</html>